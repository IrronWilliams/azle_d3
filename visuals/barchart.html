<!DOCTYPE html>
<meta charset="utf-8">
<style>
    .bar {
        fill: steelblue;
    }

    .bar:hover {
        fill: brown;
    }

    .axis--x path {
        display: none;
    }
</style>
<svg width="960" height="500"></svg>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src='http://code.jquery.com/jquery-3.3.1.min.js'></script>
<!--<script src='http://worldofdatascience.com/kedion.min.js'></script>-->
<script src="../../Kedion/main.js"></script>
<script>
    function draw_visual() {                // add wrapper function
        kedion_args = arguments[0]          // add kedion_args
        var svg = d3.select("svg"),
            margin = {
                top: kedion_args['top_choice'],
                right: kedion_args['right_choice'],
                bottom: kedion_args['bottom_choice'],
                left: kedion_args['left_choice']
            },
            width = +svg.attr("width") - margin.left - margin.right,
            height = +svg.attr("height") - margin.top - margin.bottom;
        var x = d3.scaleBand().rangeRound([0, width]).padding(0.1),
            y = d3.scaleLinear().rangeRound([height, 0]);
        var g = svg.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");
        d3.tsv(kedion_args['data_path'], function(d) {
            d.frequency = +d.frequency;
            return d;
        }, function(error, data) {
            if (error) throw error;
            x.domain(data.map(function(d) {
                return d.letter;
            }));
            y.domain([0, d3.max(data, function(d) {
                return d.frequency;
            })]);
            g.append("g").attr("class", "axis axis--x").attr("transform", "translate(0," + height + ")").call(d3.axisBottom(x));
            g.append("g").attr("class", "axis axis--y").call(d3.axisLeft(y).ticks(10, "%")).append("text").attr("transform", "rotate(-90)").attr("y", 6).attr("dy", "1.71em").attr("text-anchor", "end").text(kedion_args['y_title'])
                .style('fill', kedion_args['title_color'])
            g.selectAll(".bar").data(data).enter().append("rect").attr("class", "bar").style('fill', kedion_args['bar_color'])



                .attr("x", function(d) {
                    return x(d.letter);
                }).attr("y", function(d) {
                    return y(d.frequency);
                }).attr("width", x.bandwidth()).attr("height", function(d) {
                    return height - y(d.frequency);
                })
        });

    }
</script>